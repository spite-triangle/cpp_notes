# 概念与术语

# 服务分类

**无状态服务**: 不会在本地存储持久化数据；复制的服务实例对于同一个用户请求的响应结果是完全一致的，且多服务实例之间是没有依赖关系
- 优点：可快速扩容、迁移
- 缺点：无法存储数据，只能通过输入计算得到输出结果

**有状态服务**：会在本地存储持久化数据；复制的服务实例之间存在主从关系
- 优点：可实现数据管理
- 确定：主从节点数据同步、节点扩容复杂


# 资源与对象

> - **资源**： `k8s` 中所有内容的抽象，即「类定义」
> - **对象**: 基于资源创建出来的实体，即「实例」

## 对象规约与状态

**配置文件**：描述对象的属性，`kubectl` 可通过配置文件创建「对象」，支持的 `json` ，`yaml` 格式

- **规约`spec`**: 对象的期望状态 `desired state` ，在对象的配置文件中「必填」
- **状态`status`**: 对象的当前状态`current state`，由 `k8s` 创建维护，且控制器会努力使之达成期望状态

## 资源层级

![alt|c,70](../../image/k8s/resource_type.png)

在 `k8s` 会将资源划分为主要三个层级
- **元数据资源** : 一种模板化资源，主要用于监控和管理资源的中间变量，允许其他资源访问
- **集群资源** : 用范围覆盖整个集群，不属于任何特定命名空间，且名称必须全局唯一
- **命名空间资源**: 用于资源隔离的逻辑单元，它允许在同一集群中运行多个团队或应用，避免资源冲突。

## 元数据资源

- `Horizontal Pod Autoscaler（HPA）` : `Pod` 自动扩容，可以根据 `CPU` 使用率或自定义指标`metrics`自动对`Pod`进行扩/缩容
  - 控制器默认会间隔 `30s` 检查一次
  - 指标`metrics`类型
    - 预定义指标
    - 自定义 `pod` 指标
    - 自定义 `object` 指标
- `PodTemplate`: `Pod`的模板定义，`k8s` 会根据模板创建 `Pod`
- `LimitRange`: 对集群内 `Pod` 的 `Request` 和 `Limits` 进行统一配置，即限制 `Pod` 能使用的资源

## 集群资源

- `Namespace` : 命名空间资源，当前集群中的命令空间
- `Node`: 节点资源，实际物理机
- `ClusterRole`: 定义权限角色
- `ClusterRoleBinding`: 将权限角色与资源绑定，**且只能绑定集群级别的资源**

## 命名空间资源

### Pod

